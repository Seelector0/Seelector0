<!doctype html><html><head><title>[#BUG-618704] Ошибка структуры ответа при отправке POST /fast-delivery/v3.1.1/calculate-delivery.xml запроса, если указать нерабочие время 22 вечера.</title><meta http-equiv="Content-Type" content="application/vnd.ms-word; charset=UTF-8"/><style>.tableBorder, .grid { background-color: #fff; width: 100%; border-collapse: collapse; }.tableBorder td, .grid td { vertical-align: top; padding: 2px; border: 1px solid #ccc; }.noPadding { padding: 0 !important; }h3 .subText { font-size: 60%; font-weight: normal; }td.blank { padding: 0; margin: 0; }.blank td { border: none; }#descriptionArea { margin: 0; padding: 2px; border: 1px solid #ccc; }</style></head><body><table class="tableBorder" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td colspan="2" style="background-color:#f0f0f0;width:100%;vertical-align:top"><h3>[BUG-618704]&nbsp;<a href="https://tracker.yandex.ru/r/BUG-618704?source_from=doc&source_type=export">Ошибка структуры ответа при отправке POST /fast-delivery/v3.1.1/calculate-delivery.xml запроса, если указать нерабочие время 22 вечера.</a><span class="subText"> Создано: 02 июня 2022 в 17:29&nbsp;Обновлено: 05 июня 2022 в 11:04</span></h3></td></tr><tr><td style="width:20%"><b>Статус:</b></td><td style="width:80%">Открыт</td></tr><tr><td style="width:20%"><b>Очередь:</b></td><td style="width:80%"><a href="https://tracker.yandex.ru/r/BUG">Баг-репорты</a></td></tr><tr><td><b>Компоненты:</b></td><td>Нет компонента</td></tr><tr><td><b>Найдено в версиях:</b></td><td>Без версии</td></tr><tr><td><b>Исправить в версиях:</b></td><td>Без версии</td></tr></table><br/><table class="grid" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Тип:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Ошибка</td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Приоритет:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%;white-space:nowrap">Средний</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Автор:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%"><a href="https://staff.yandex.ru/odintsov123?org=6912661">Кирилл Одинцов</a></td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Исполнитель:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%;white-space:nowrap">Нет исполнителя</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Резолюция:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Не разрешен</td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Проект:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Без проекта</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Теги:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top">Нет тега</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Оценка:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задана</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Затрачено времени:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задано</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Первоначальная оценка:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задана</td></tr></table><br/><table class="grid" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Изменил:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%"><a href="https://staff.yandex.ru/odintsov123?org=6912661">Кирилл Одинцов</a></td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Комментариев без сообщения:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Комментариев с сообщением:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Проголосовало:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Статус изменен:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">02 июня 2022 в 17:29</td></tr></table><br/><table cellpadding="2" cellspacing="0" align="center" style="border:0;width:100%"><tr><td align="center" style="background-color:#bbbbbb;width:1%;white-space:nowrap">&nbsp;<font style="color:#ffffff"><b>Описание</b></font>&nbsp;</td><td>&nbsp;</td></tr></table><table cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td id="descriptionArea"><div class="wiki-doc wiki-doc_magiclinks_yes i-bem" data-bem='{"wiki-doc":{"user":{"codeTheme":"github"},"wiki-attrs":{"lang":"ru","render_html":true,"code_theme":"github","magiclinks_url":"https://magiclinks.yandex.{tld}/magiclinks/v1/links","pos_end":982,"mode":"view","env":"production","pos_start":0}}}'><div class="wiki-p">Окружение: <br/>ОС: Mac OS 12.3. Postman Version 9.20.3<br/>Хост <a class="b-link wiki-ref wiki-ref wiki-ref_magiclink_yes" href="https://2760bd22-abcc-46c1-97b3-7fc50318dc36.serverhub.praktikum-services.ru/" target="_blank" title="Внешняя ссылка (откроется в новом окне)">https://2760bd22-abcc-46c1-97b3-7fc50318dc36.serverhub.praktikum-services.ru/</a></div><div class="wiki-psep"></div><div class="wiki-p">Описание:<br/>Структура ответа не соответствует документации если в параметре deliveryTime указать нерабочие время 22 вечера.</div><div class="wiki-psep"></div><div class="wiki-p">Шаги для воспроизведения:<br/>Отправить POST запрос /fast-delivery/v3.1.1/calculate-delivery.xml </div><div class="wiki-psep"></div><div class="wiki-p">В теле указать:</div><div class="wiki-psep"></div><span class="wiki-formatter" style="">
    <div class="b-page-code b-page-code_multiline_yes i-bem" data-bem='{"b-page-code": {}}'>
        
            <code class="b-page-code__empty-line-numbers"></code>
        
        <code class="b-page-code__code no-highlight" style="white-space: pre;">&lt;InputModel&gt;
    &lt;productsCount&gt;23&lt;/productsCount&gt;
    &lt;productsWeight&gt;5.115&lt;/productsWeight&gt;
    &lt;deliveryTime&gt;22&lt;/deliveryTime&gt;
&lt;/InputModel&gt;</code>
    </div>

</span><div class="wiki-psep"></div><div class="wiki-p">Ожидаемый результат: Информация, что доставка не возможна. Ошибок в структуре ответа нет</div><div class="wiki-psep"></div><span class="wiki-formatter" style="">
    <div class="b-page-code b-page-code_multiline_yes i-bem" data-bem='{"b-page-code": {}}'>
        
            <code class="b-page-code__empty-line-numbers"></code>
        
        <code class="b-page-code__code no-highlight" style="white-space: pre;">HTTP/1.1 200 OK
&lt;response name=&quot;Привезём быстро&quot; isItPossibleToDeliver=&quot;false&quot; hostDeliveryCost=&quot;43&quot; clientDeliveryCost=&quot;0&quot;&gt;
    &lt;toBeDeliveredTime&gt;
        &lt;min&gt;25&lt;/min&gt;
        &lt;max&gt;30&lt;/max&gt;
    &lt;/toBeDeliveredTime&gt;
&lt;/response&gt;</code>
    </div>

</span><div class="wiki-psep"></div><div class="wiki-p">Фактический результат: Ошибка в структуре ответа. Информации, что доставка не возможна нет</div><div class="wiki-psep"></div><span class="wiki-formatter" style="">
    <span class="b-page-code b-page-code_inline_yes i-bem" data-bem='{"b-page-code": {}}'>
        <code class="b-page-code__code no-highlight">&lt;response name=&quot;Привезём быстро&quot;/&gt;</code>
    </span>

</span></div>
<!--wf-ws v6.1-0--><br/></td></tr></table>Сформирован 03 августа 2022 в 15:29 пользователем Кирилл Одинцов с использованием tracker.yandex.ru</body></html>